<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Tweets word-cloud - Part 1 | Christophe website
</title>
  <link rel="canonical" href="/tweets-word-cloud-part-1.html">


  <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="/theme/css/theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="/feeds/all.atom.xml">
  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="/feeds/data-visualisation.atom.xml">  
  <meta name="description" content="How to make a word cloud with R.">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="/">
        <img class="img-fluid rounded" src=/images/banner_1_cv.png alt="Christophe website">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="/">Christophe website</a></h1>
      <ul class="list-inline">
            <li class="list-inline-item"><a href="/pages/about-me.html">About me</a></li>
            <li class="list-inline-item"><a href="/pages/now.html">Now</a></li>
            <li class="list-inline-item"><a href="/pages/weight-progress.html">Weight Progress</a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Tweets word-cloud - Part 1
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2014-07-17T00:00:00+01:00">
          <i class="fa fa-clock-o"></i>
          Thu 17 July 2014
        </li>
        <li class="list-inline-item">
          <i class="fa fa-folder-open-o"></i>
          <a href="/category/data-visualisation.html">Data Visualisation</a>
        </li>
          <li class="list-inline-item">
            <i class="fa fa-user-o"></i>
              <a href="/author/christophe-guerrier.html">Christophe Guerrier</a>          </li>
          <li class="list-inline-item">
            <i class="fa fa-files-o"></i>
              <a href="/tag/data-visualisation.html">#Data Visualisation</a>,               <a href="/tag/r.html">#R</a>,               <a href="/tag/twitter.html">#twitter</a>          </li>
      </ul>
    </header>
    <div class="content">
      


I have been interesting in looking at my own tweets, and see what kind of visualization and analyze I could run on it. First I used the archive feature on twitter to get a file copy of my tweets, then using the package <a href="http://cran.r-project.org/web/packages/wordcloud/" title="R package wordcloud">wordcloud</a>&nbsp;and <a href="http://cran.r-project.org/web/packages/tm/" title="R package tm">tm</a>&nbsp;I processed the archive.<br /><br /><h1>Getting a&nbsp;twitter snapshot</h1><br />There is way to query your twitter feed directly (using API and package like<a href="http://cran.r-project.org/web/packages/twitteR/index.html" title="R package twitterR"> twitterR</a>) , but the simplest way I found was to download an <a href="https://blog.twitter.com/2012/your-twitter-archive" title="Getting your twitter archive">archive</a>. The process is quite simple, go to your Twitter account settings, there should be a&nbsp;<strong>Request your archive </strong>link you can click on.<br /><br />It will take some time to have your snapshot ready, but when it is, you will receive an email, follow the link and download it. You can can start exploring, by opening the index.html file. The archive is quite neat, you can explore by month and have an overview of your activity over the years.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><img alt="archive" class="size-medium wp-image-24" src="http://tofstatistics.files.wordpress.com/2014/07/screen-shot-2014-07-17-at-09-59-36.png?w=300" height="347" style="margin-left: auto; margin-right: auto;" width="640" /></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-size: small; text-align: start;">Screen capture of my twitter archive</span></td></tr></tbody></table><br />If you explore the directories unzipped the archive is composed of Json files, there is package to read those, but for my purpose I will use the csv file generated ( called tweets.csv), as I can read that straight away into R.<br /><br /><h1>R processing</h1><br /><pre class="r"><code><b>tweets="filepath/tweets.csv"<br />tw &lt;- read.csv(file = tweets,header = TRUE)</b></code></pre><br />Loading the packages I will use<br /> <strong>tm </strong>is Text Mining Package.A framework for text mining applications within R.<br /> <strong>wordcloud</strong> allow to generate word cloud pictures.<br /><br /><pre class="r"><code><b>require(tm)<br />require(wordcloud)</b></code></pre><br />From the text we create a corpus:<br /><br /><pre class="r"><code><b>tw.corpus &lt;- Corpus(DataframeSource(as.data.frame(tw$text)))</b></code></pre><br />Some cleaning up of the world, I will go into more detail in part 2.<br /><br /><pre class="r"><code><b>tw.corpus &lt;- tm_map(tw.corpus, removePunctuation)<br />tw.corpus &lt;- tm_map(tw.corpus, tolower)<br />tw.corpus &lt;- tm_map(tw.corpus, function(x) removeWords(x, stopwords("english")))<br />tdm &lt;- TermDocumentMatrix(tw.corpus)<br />m &lt;- as.matrix(tdm)<br />v &lt;- sort(rowSums(m),decreasing=TRUE)<br />d &lt;- data.frame(word = names(v),freq=v)</b></code></pre><br />Already we can find the most frequent word, i use:<br /><br /><pre class="r"><code><b>max(d$freq)<br />d[which.max(d$freq),]$word</b></code></pre><br />Which is the word <strong>via</strong>, used 458 times.<br /><br /><pre class="r"><code><b>dim(d)[1]</b></code></pre><br />And find that I used 14619 different words.<br /><br />Plotting the word cloud is straightforward from there:<br /><br /><pre class="r"><code><b>wordcloud(words = d$word,freq = d$freq,<br />          scale=c(8,.3),<br />          min.freq=10,<br />          max.words=dim(d)[1], random.order=T, rot.per=.15, <br />          vfont=c("sans serif","plain"))</b></code></pre><br />And here's the result.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><img alt="wordcloud" class="size-medium wp-image-25" src="http://tofstatistics.files.wordpress.com/2014/07/wordcloud1.jpeg?w=300" height="552" style="margin-left: auto; margin-right: auto;" width="640" /></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-size: small; text-align: start;">First word cloud of my past tweets</span></td></tr></tbody></table><br />Not too bad for a first pass, but I am unhappy about few things:<br /><br /><ul><br /><li>the cloud could use some colours.</li><br /><li>I can see twitter user handle in this, which is not something i want in the final cloud, it probably happen during the removing of the punctuation in the corpus processing. I will need to fix that in part 2. But that also gave the idea to create a cloud with only the user handles to visualize, who i interacted the most with.</li><br /><li>It is very cluttered, I may need to reduce the number of words displayed, or increase the minimum limit. At the moment wordcloud tries to display every word appearing more than 10 times.</li><br /><li>That last command, generates many warning, which need to be investigated.</li></ul><br />See you in Part 2.<br /><br />


    </div>
  </article>
  <hr>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function() {
      this.page.url = '/tweets-word-cloud-part-1.html';
      this.page.identifier = 'tweets-word-cloud-part-1';
    };
    (function() {
      var d = document;
      var s = d.createElement('script');
      s.src = '//http-tofguerrier-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript class="text-muted">
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
  </noscript>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
      <li class="list-inline-item"><a href="/authors.html">Authors</a></li>
    <li class="list-inline-item"><a href="/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="/tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>
</body>

</html>